{{ define "func_params" -}}
{{- $paramsLen := len .Parameters -}}
{{- if not .Constructor -}}
	h {{ .StructType.CType }}{{ if $paramsLen }}, {{ end -}}
{{- end }}
{{- range $idx, $param := .Parameters -}}
	{{- $param.Name }} {{ $param.Type.CType }}{{ if not (isLastIndex $paramsLen $idx) -}}, {{ end -}}
{{- end -}}
{{- end -}}


{{ define "func_args" -}}
{{- $paramsLen := len .Parameters -}}
{{- range $idx, $param := .Parameters -}}
	{{- $param.Name }}{{ if not (isLastIndex $paramsLen $idx) -}}, {{ end -}}
{{- end -}}
{{- end -}}


{{- if .Constructor -}}
//export {{ .FunctionName }}
func {{ .FunctionName }}({{ template "func_params" . }}) {{ .ReturnType.CType }} {
	result := libmus.{{ .FunctionName }}({{ template "func_args" . }})
	return {{ printf .ReturnType.GoToC "result" }}
}
{{ else -}}
//export {{ .StructType.Name }}_{{ .FunctionName }}
func {{ .StructType.Name }}_{{ .FunctionName }}({{ template "func_params" . }}) {{ .ReturnType.CType }} {
	this := {{ printf .StructType.CToGo "h" }}
	result := this.{{ .FunctionName }}({{ template "func_args" . }})
	return {{ printf .ReturnType.GoToC "result" }}
}
{{ end -}}